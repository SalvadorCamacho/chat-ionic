(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"ct+p":function(t,n,e){"use strict";e.r(n),e.d(n,"HomePageModule",function(){return N});var o=e("ofXK"),c=e("TEn/"),i=e("3Pt+"),s=e("tyNb"),r=e("mrSG"),a=e("fXoL"),b=e("Emxi");const l=["area"],h=["scrollElement"];function u(t,n){if(1&t&&(a.Ob(0,"ion-card"),a.Ob(1,"ion-card-subtitle"),a.hc(2),a.Nb(),a.Ob(3,"ion-card-content"),a.hc(4),a.Nb(),a.hc(5),a.Nb()),2&t){const t=n.$implicit,e=n.last,o=a.Yb(2);a.Bb(2),a.kc(" ",t.type," - ",o.fecha(t.date)," "),a.Bb(2),a.jc(" ",t.content," "),a.Bb(1),a.jc(" ",e?o.irAlFinal():""," ")}}function g(t,n){if(1&t&&(a.Ob(0,"div"),a.gc(1,u,6,4,"ion-card",10),a.Nb()),2&t){const t=a.Yb();a.Bb(1),a.bc("ngForOf",t.room.Messages)}}let f=(()=>{class t{constructor(t,n,e){this.navParams=t,this.modal=n,this.chatService=e}ngOnInit(){this.chat=this.navParams.get("chat"),this.chatService.getChat(this.chat.id).subscribe(t=>{this.room=t})}ngAfterViewChecked(){this.content.scrollToBottom(0),this.foco.setFocus()}irAlFinal(){this.content.scrollToBottom(0)}cerrarChat(){this.modal.dismiss()}sendMessage(){if(""!=this.msg){const t=JSON.parse(localStorage.getItem("usuario")),n={content:this.msg,type:t,date:new Date};this.chatService.sendMsgToFireBase(n,this.chat.id),this.msg="",this.foco.setFocus()}}fecha(t){let n=t.toDate(),e=n.getYear(),o=n.getMonth();return n.getDay()+"/"+o+"/"+e+" - "+n.getHours()+":"+n.getMinutes()+"hrs."}}return t.\u0275fac=function(n){return new(n||t)(a.Lb(c.x),a.Lb(c.w),a.Lb(b.a))},t.\u0275cmp=a.Fb({type:t,selectors:[["app-chat"]],viewQuery:function(t,n){if(1&t&&(a.lc(l,1),a.lc(h,1)),2&t){let t;a.cc(t=a.Xb())&&(n.foco=t.first),a.cc(t=a.Xb())&&(n.content=t.first)}},decls:15,vars:3,consts:[["color","tertiary"],["slot","end","fill","clear",3,"click"],["name","arrow-back",2,"font-size","25px","color","aliceblue"],["padding",""],["scrollElement",""],[4,"ngIf"],[3,"ngModel","ngModelChange"],["area",""],["color","success",3,"click"],["name","send"],[4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(a.Ob(0,"ion-header"),a.Ob(1,"ion-toolbar",0),a.Ob(2,"ion-button",1),a.Wb("click",function(){return n.cerrarChat()}),a.Mb(3,"ion-icon",2),a.Nb(),a.Ob(4,"ion-title"),a.hc(5),a.Nb(),a.Nb(),a.Nb(),a.Ob(6,"ion-content",3,4),a.gc(8,g,2,1,"div",5),a.Nb(),a.Ob(9,"ion-footer",3),a.Ob(10,"ion-item"),a.Ob(11,"ion-textarea",6,7),a.Wb("ngModelChange",function(t){return n.msg=t}),a.Nb(),a.Ob(13,"ion-button",8),a.Wb("click",function(){return n.sendMessage()}),a.Mb(14,"ion-icon",9),a.Nb(),a.Nb(),a.Nb()),2&t&&(a.Bb(5),a.jc(" ",n.chat.name," "),a.Bb(3),a.bc("ngIf",n.room),a.Bb(3),a.bc("ngModel",n.msg))},directives:[c.j,c.t,c.d,c.k,c.s,c.h,o.i,c.i,c.n,c.r,c.z,i.d,i.e,o.h,c.e,c.g,c.f],styles:["ion-content[_ngcontent-%COMP%]{--background:#dae1e4}ion-card[_ngcontent-%COMP%]{--background:#fff}"]}),t})();var d=e("FHRc");function m(t,n){if(1&t){const t=a.Pb();a.Ob(0,"ion-item",6),a.Wb("click",function(){a.dc(t);const e=n.$implicit;return a.Yb().openChat(e)}),a.Ob(1,"ion-avatar",7),a.Mb(2,"ion-img",8),a.Nb(),a.Ob(3,"ion-label"),a.Ob(4,"h2"),a.Ob(5,"b"),a.hc(6),a.Nb(),a.Nb(),a.Ob(7,"h3"),a.hc(8),a.Nb(),a.Nb(),a.Nb()}if(2&t){const t=n.$implicit;a.Bb(2),a.bc("src",t.img),a.Bb(4),a.ic(t.name),a.Bb(2),a.ic(t.description)}}const p=[{path:"",component:(()=>{class t{constructor(t,n,e,o){this.outService=t,this.modal=n,this.chatService=e,this.actionSheetController=o,this.chats=[]}ngOnInit(){this.chatService.getChatRooms().subscribe(t=>{this.chats=t})}salir(){this.outService.logout()}openChat(t){this.modal.create({component:f,componentProps:{chat:t}}).then(t=>t.present())}presentActionSheet(){return Object(r.b)(this,void 0,void 0,function*(){const t=yield this.actionSheetController.create({header:"Opciones",cssClass:"my-custom-class",buttons:[{text:"Cerrar sesi\xf3n",role:"destructive",icon:"log-out",handler:()=>{this.salir()}}]});yield t.present()})}}return t.\u0275fac=function(n){return new(n||t)(a.Lb(d.a),a.Lb(c.w),a.Lb(b.a),a.Lb(c.a))},t.\u0275cmp=a.Fb({type:t,selectors:[["app-home"]],decls:9,vars:3,consts:[[3,"translucent"],["color","primary"],["fill","clear","slot","end",3,"click"],["name","menu",2,"color","aliceblue","font-size","25px"],[3,"fullscreen"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],[3,"src"]],template:function(t,n){1&t&&(a.Ob(0,"ion-header",0),a.Ob(1,"ion-toolbar",1),a.Ob(2,"ion-button",2),a.Wb("click",function(){return n.presentActionSheet()}),a.Mb(3,"ion-icon",3),a.Nb(),a.Ob(4,"ion-title"),a.hc(5," Salas de chat "),a.Nb(),a.Nb(),a.Nb(),a.Ob(6,"ion-content",4),a.Ob(7,"ion-list"),a.gc(8,m,9,3,"ion-item",5),a.Nb(),a.Nb()),2&t&&(a.bc("translucent",!0),a.Bb(6),a.bc("fullscreen",!0),a.Bb(2),a.bc("ngForOf",n.chats))},directives:[c.j,c.t,c.d,c.k,c.s,c.h,c.p,o.h,c.n,c.c,c.l,c.o],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=a.Jb({type:t}),t.\u0275inj=a.Ib({imports:[[s.i.forChild(p)],s.i]}),t})(),N=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=a.Jb({type:t}),t.\u0275inj=a.Ib({imports:[[o.b,i.a,c.u,O]]}),t})()}}]);